import{a as R,b as J,c as Y,d as H,e as L,f as q,g as K}from"./chunk-5OVA7WMN.js";import{A as G,B as N,C as B,D as j,E as z,T as U,r as k,u as I,v as E,w as F,x as V,y as A,z as $}from"./chunk-AWTQJJWB.js";import{Aa as P,Bb as T,Ea as C,Ga as d,Ha as r,N as p,O as _,Sa as h,Ua as a,Va as M,Wa as u,ba as b,ca as s,ga as x,hb as O,ka as y,oa as f,pb as D,qb as w,sb as S,xa as g,ya as n,za as o}from"./chunk-I6VPMUNL.js";function W(l,t){l&1&&(n(0,"div",6)(1,"p"),a(2,"Loading movies..."),o()())}function X(l,t){l&1&&(n(0,"div",7)(1,"p"),a(2,"No movies found."),o()())}function Z(l,t){if(l&1){let e=C();n(0,"div",13),P(1,"img",14),n(2,"div",15)(3,"h3",16),a(4),o(),n(5,"p",17),a(6),o(),n(7,"div",18)(8,"button",19),d("click",function(c){p(e);let m=r().$implicit;return r(2).toggleFavorite(m),_(c.stopPropagation())}),n(9,"mat-icon"),a(10,"favorite"),o()(),n(11,"button",20),d("click",function(c){p(e);let m=r().$implicit;return r(2).openSynopsisDialog(m),_(c.stopPropagation())}),n(12,"mat-icon"),a(13,"visibility"),o()(),n(14,"button",21),d("click",function(c){p(e);let m=r().$implicit;return r(2).openDirectorDialog(m.Director),_(c.stopPropagation())}),n(15,"mat-icon"),a(16,"person"),o()(),n(17,"button",22),d("click",function(c){p(e);let m=r().$implicit;return r(2).openGenreDialog(m.Genre),_(c.stopPropagation())}),n(18,"mat-icon"),a(19,"category"),o()(),n(20,"mat-icon",23),a(21,"expand_more"),o()()()()}if(l&2){let e=r().$implicit,i=r(2);s(),g("src",e.ImagePath,b)("alt",e.Title),s(3),M(e.Title),s(2),M(e.Director==null?null:e.Director.Name),s(3),h("favorite-filled",i.isFavorite(e.Title))}}function ee(l,t){if(l&1&&(n(0,"p")(1,"strong"),a(2,"Director Bio:"),o(),a(3),o()),l&2){let e=r(2).$implicit;s(3),u(" ",e.Director.Bio)}}function te(l,t){if(l&1){let e=C();n(0,"div",24),P(1,"img",25),n(2,"mat-card-header")(3,"mat-card-title"),a(4),o(),n(5,"mat-card-subtitle"),a(6),o()(),n(7,"mat-card-content")(8,"p")(9,"strong"),a(10,"Genre:"),o(),a(11),o(),n(12,"p")(13,"strong"),a(14,"Description:"),o(),a(15),o(),f(16,ee,4,1,"p",26),o(),n(17,"mat-card-actions")(18,"button",27),d("click",function(c){p(e);let m=r().$implicit;return r(2).openGenreDialog(m.Genre),_(c.stopPropagation())}),a(19," Genre Details "),o(),n(20,"button",27),d("click",function(c){p(e);let m=r().$implicit;return r(2).openDirectorDialog(m.Director),_(c.stopPropagation())}),a(21," Director Details "),o(),n(22,"button",27),d("click",function(c){p(e);let m=r().$implicit;return r(2).openSynopsisDialog(m),_(c.stopPropagation())}),a(23," Full Synopsis "),o(),n(24,"button",28),d("click",function(c){p(e);let m=r().$implicit;return r(2).toggleFavorite(m),_(c.stopPropagation())}),n(25,"mat-icon"),a(26,"favorite"),o()(),n(27,"button",29),d("click",function(c){p(e);let m=r().$implicit;return r(2).toggleCard(m._id),_(c.stopPropagation())}),n(28,"mat-icon"),a(29,"expand_less"),o()()()()}if(l&2){let e=r().$implicit,i=r(2);s(),g("src",e.ImagePath,b)("alt",e.Title),s(3),M(e.Title),s(2),u("Directed by: ",e.Director==null?null:e.Director.Name),s(5),u(" ",e.Genre==null?null:e.Genre.Name),s(4),u(" ",e.Description),s(),g("ngIf",e.Director==null?null:e.Director.Bio),s(9),h("favorite-filled",i.isFavorite(e.Title))}}function ie(l,t){if(l&1){let e=C();n(0,"mat-card",10),d("click",function(){let c=p(e).$implicit,m=r(2);return _(m.openSynopsisDialog(c))}),f(1,Z,22,6,"div",11)(2,te,30,9,"div",12),o()}if(l&2){let e=t.$implicit,i=r(2);h("expanded",i.isExpanded(e._id)),s(),g("ngIf",!i.isExpanded(e._id)),s(),g("ngIf",i.isExpanded(e._id))}}function ne(l,t){if(l&1&&(n(0,"div",8),f(1,ie,3,4,"mat-card",9),o()),l&2){let e=r();s(),g("ngForOf",e.movies)("ngForTrackBy",e.trackByMovieId)}}var Q=class l{constructor(t,e,i,c){this.fetchApiData=t;this.dialog=e;this.router=i;this.cdr=c}movies=[];loading=!0;expandedCards=new Set;userFavorites=new Set;ngOnInit(){this.getMovies(),this.getUserFavorites()}getMovies(){this.loading=!0,this.cdr.detectChanges(),this.fetchApiData.getAllMovies().subscribe({next:t=>{this.movies=t||[],this.loading=!1,this.cdr.detectChanges()},error:t=>{console.error("Error loading movies:",t),this.loading=!1,this.movies=[],this.cdr.detectChanges()}})}openGenreDialog(t){this.dialog.open(L,{width:"500px",data:t})}openDirectorDialog(t){this.dialog.open(q,{width:"500px",data:t})}openSynopsisDialog(t){this.dialog.open(K,{width:"500px",maxHeight:"80vh",data:t})}addToFavorites(t){let e=JSON.parse(localStorage.getItem("user")||"{}");this.fetchApiData.addFavoriteMovie(e.Username,t.Title).subscribe({next:i=>{this.userFavorites.add(t.Title),this.cdr.detectChanges()},error:i=>{console.error("Error adding to favorites:",i)}})}removeFromFavorites(t){let e=JSON.parse(localStorage.getItem("user")||"{}");this.fetchApiData.deleteFavoriteMovie(e.Username,t.Title).subscribe({next:i=>{this.userFavorites.delete(t.Title),this.cdr.detectChanges()},error:i=>{console.error("Error removing from favorites:",i)}})}toggleFavorite(t){this.isFavorite(t.Title)?this.removeFromFavorites(t):this.addToFavorites(t)}trackByMovieId(t,e){return e._id||t}toggleCard(t){this.expandedCards.has(t)?this.expandedCards.delete(t):this.expandedCards.add(t)}isExpanded(t){return this.expandedCards.has(t)}getUserFavorites(){let t=JSON.parse(localStorage.getItem("user")||"{}");t.Username&&this.fetchApiData.getFavoriteMovies(t.Username).subscribe({next:e=>{this.userFavorites.clear();let i=[];Array.isArray(e)?i=e:e&&e.FavoriteMovies&&Array.isArray(e.FavoriteMovies)?i=e.FavoriteMovies:e&&e.movies&&Array.isArray(e.movies)&&(i=e.movies),i.length>0&&this.fetchApiData.getAllMovies().subscribe({next:c=>{c.forEach(m=>{i.includes(m._id)&&this.userFavorites.add(m.Title)}),this.cdr.detectChanges()},error:c=>{console.error("Error loading movies for favorites:",c)}})},error:e=>{console.error("Error loading favorites:",e)}})}isFavorite(t){return this.userFavorites.has(t)}goToProfile(){this.router.navigate(["/profile"])}static \u0275fac=function(e){return new(e||l)(x(z),x(U),x(T),x(O))};static \u0275cmp=y({type:l,selectors:[["app-movie-card"]],decls:11,vars:3,consts:[[1,"movies-container"],[1,"header-section"],["mat-raised-button","","color","primary",1,"profile-button",3,"click"],["class","loading",4,"ngIf"],["class","no-movies",4,"ngIf"],["class","movies-grid",4,"ngIf"],[1,"loading"],[1,"no-movies"],[1,"movies-grid"],["class","movie-card",3,"expanded","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"movie-card",3,"click"],["class","movie-thumbnail",4,"ngIf"],["class","movie-expanded",4,"ngIf"],[1,"movie-thumbnail"],[1,"thumbnail-image",3,"src","alt"],[1,"thumbnail-overlay"],[1,"thumbnail-title"],[1,"thumbnail-director"],[1,"thumbnail-actions"],["mat-icon-button","","color","warn","matTooltip","Toggle Favorites",1,"favorite-btn",3,"click"],["mat-icon-button","","matTooltip","View Details",1,"view-more-btn",3,"click"],["mat-icon-button","","matTooltip","Director Info",1,"director-btn",3,"click"],["mat-icon-button","","matTooltip","Genre Info",1,"genre-btn",3,"click"],[1,"expand-icon"],[1,"movie-expanded"],["mat-card-image","",1,"expanded-image",3,"src","alt"],[4,"ngIf"],["mat-button","","color","primary",3,"click"],["mat-icon-button","","color","warn",3,"click"],["mat-icon-button","",3,"click"]],template:function(e,i){e&1&&(n(0,"div",0)(1,"div",1)(2,"h1"),a(3,"All Movies"),o(),n(4,"button",2),d("click",function(){return i.goToProfile()}),n(5,"mat-icon"),a(6,"person"),o(),a(7," Profile "),o()(),f(8,W,3,0,"div",3)(9,X,3,0,"div",4)(10,ne,2,2,"div",5),o()),e&2&&(s(8),g("ngIf",i.loading),s(),g("ngIf",!i.loading&&i.movies.length===0),s(),g("ngIf",!i.loading&&i.movies.length>0))},dependencies:[j,F,G,A,N,B,$,V,E,I,k,J,R,H,Y,S,D,w],styles:[".movies-container[_ngcontent-%COMP%]{padding:2rem;background:linear-gradient(135deg,#0f0f23,#0a0a1a,#05050f);min-height:100vh}.header-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}h1[_ngcontent-%COMP%]{color:#fff;font-size:2.5em;margin:0;font-family:Crimson Pro,serif}.profile-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.loading[_ngcontent-%COMP%], .no-movies[_ngcontent-%COMP%]{text-align:center;color:#fff;font-size:1.2em;margin-top:2rem}.movies-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:1.5rem;max-width:1400px;margin:0 auto}.movie-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 4px 12px #00000026;transition:all .3s ease;cursor:pointer;position:relative}.movie-card[_ngcontent-%COMP%]:hover{transform:translateY(-8px);box-shadow:0 8px 25px #0003}.movie-card.expanded[_ngcontent-%COMP%]{grid-column:1/-1;max-width:800px;margin:0 auto;width:100%}.movie-thumbnail[_ngcontent-%COMP%]{position:relative;height:400px;overflow:hidden}.thumbnail-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .3s ease}.thumbnail-overlay[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0;background:linear-gradient(transparent,#000c);color:#fff;padding:1.5rem 1rem 1rem;transform:translateY(100%);transition:transform .3s ease}.movie-card[_ngcontent-%COMP%]:hover   .thumbnail-overlay[_ngcontent-%COMP%]{transform:translateY(0)}.thumbnail-title[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:1.1rem;font-weight:600;line-height:1.2;font-family:Crimson Pro,serif}.thumbnail-director[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:.9rem;opacity:.9}.thumbnail-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-top:.5rem}.favorite-btn[_ngcontent-%COMP%], .view-more-btn[_ngcontent-%COMP%], .director-btn[_ngcontent-%COMP%], .genre-btn[_ngcontent-%COMP%]{background:#0009;border-radius:50%;width:2.5rem;height:2.5rem;min-width:2.5rem}.favorite-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .view-more-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .director-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .genre-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff;font-size:1.2rem}.favorite-filled[_ngcontent-%COMP%]{color:#f44336!important}.expand-icon[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem;background:#0009;border-radius:50%;padding:.5rem;font-size:1.5rem;width:2.5rem;height:2.5rem;display:flex;align-items:center;justify-content:center}.movie-expanded[_ngcontent-%COMP%]   .expanded-image[_ngcontent-%COMP%]{height:300px;object-fit:cover}.movie-expanded[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{padding:1.5rem 1.5rem 0}.movie-expanded[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-family:Crimson Pro,serif}.movie-expanded[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:1rem 1.5rem}.movie-expanded[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0;line-height:1.5}.movie-expanded[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;align-items:center;padding:1rem 1.5rem 1.5rem;gap:.5rem}@media (max-width: 768px){.header-section[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;text-align:center}h1[_ngcontent-%COMP%]{font-size:2em}.movies-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:1rem}.movie-card.expanded[_ngcontent-%COMP%]{grid-column:1/-1}.movie-thumbnail[_ngcontent-%COMP%]{height:300px}}"]})};export{Q as MovieCardComponent};
