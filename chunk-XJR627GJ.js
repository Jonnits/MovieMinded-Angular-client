import{a as U,b as P,c as S,d as F,e as v,f as R,g as B,h as k,i as I,j as E,k as O,l as W,m as A}from"./chunk-3QXJK43Q.js";import{A as _,B as w,D as b,E as L,R as N,T as V,u as M,v as h,w as C,x as D,y}from"./chunk-AWTQJJWB.js";import{Bb as j,Ga as g,Ua as m,Xa as p,Ya as c,Za as u,ca as d,ga as s,ka as f,ya as r,za as o}from"./chunk-I6VPMUNL.js";var T=class l{constructor(e,i,t){this.fetchApiData=e;this.dialogRef=i;this.snackBar=t}userData={Username:"",Password:"",Email:"",Birthday:""};ngOnInit(){}registerUser(){if(!this.userData.Username||this.userData.Username.length<5){this.snackBar.open("Username must be at least 5 characters long","OK",{duration:3e3});return}if(!this.userData.Password||this.userData.Password.length<5){this.snackBar.open("Password must be at least 5 characters long","OK",{duration:3e3});return}if(!this.userData.Email||!this.isValidEmail(this.userData.Email)){this.snackBar.open("Please enter a valid email address","OK",{duration:3e3});return}this.fetchApiData.userRegistration(this.userData).subscribe({next:e=>{this.dialogRef.close(),this.snackBar.open("Registration successful!","OK",{duration:2e3})},error:e=>{console.error("Registration error:",e);let i="Registration failed. Please try again.";e.error&&e.error.errors?i=`Validation error: ${e.error.errors.map(n=>n.msg).join(", ")}`:e.error&&e.error.message&&(i=e.error.message),this.snackBar.open(i,"OK",{duration:5e3})}})}isValidEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}static \u0275fac=function(i){return new(i||l)(s(L),s(N),s(A))};static \u0275cmp=f({type:l,selectors:[["app-user-registration-form"]],inputs:{userData:"userData"},decls:17,vars:4,consts:[["matInput","","placeholder","Username","type","text","name","Username","required","",3,"ngModelChange","ngModel"],["matInput","","type","password","placeholder","Password","name","Password","required","",3,"ngModelChange","ngModel"],["matInput","","type","email","placeholder","Email","name","Email","required","",3,"ngModelChange","ngModel"],["matInput","","type","date","placeholder","Birthday","name","Birthday",3,"ngModelChange","ngModel"],["mat-raised-button","","color","primary",3,"click"]],template:function(i,t){i&1&&(r(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),m(3,"Sign Up!"),o()(),r(4,"mat-card-content")(5,"form")(6,"mat-form-field")(7,"input",0),u("ngModelChange",function(a){return c(t.userData.Username,a)||(t.userData.Username=a),a}),o()(),r(8,"mat-form-field")(9,"input",1),u("ngModelChange",function(a){return c(t.userData.Password,a)||(t.userData.Password=a),a}),o()(),r(10,"mat-form-field")(11,"input",2),u("ngModelChange",function(a){return c(t.userData.Email,a)||(t.userData.Email=a),a}),o()(),r(12,"mat-form-field")(13,"input",3),u("ngModelChange",function(a){return c(t.userData.Birthday,a)||(t.userData.Birthday=a),a}),o()()()(),r(14,"mat-card-actions")(15,"button",4),g("click",function(){return t.registerUser()}),m(16," Sign Up "),o()()()),i&2&&(d(7),p("ngModel",t.userData.Username),d(2),p("ngModel",t.userData.Password),d(2),p("ngModel",t.userData.Email),d(2),p("ngModel",t.userData.Birthday))},dependencies:[b,C,_,y,w,D,P,U,W,O,h,M,E,k,S,F,v,I,B,R],encapsulation:2})};var x=class l{constructor(e,i,t,n){this.fetchApiData=e;this.dialogRef=i;this.snackBar=t;this.router=n}userData={Username:"",Password:""};ngOnInit(){}loginUser(){this.fetchApiData.userLogin(this.userData).subscribe({next:e=>{localStorage.setItem("user",JSON.stringify(e.user)),localStorage.setItem("token",e.token),this.dialogRef.close(),this.snackBar.open("Login successful!","OK",{duration:2e3}),this.router.navigate(["movies"])},error:e=>{console.error("Login error:",e);let i="Login failed. Please check your username and password.";e.error&&e.error.message&&(i=e.error.message),this.snackBar.open(i,"OK",{duration:5e3})}})}static \u0275fac=function(i){return new(i||l)(s(L),s(N),s(A),s(j))};static \u0275cmp=f({type:l,selectors:[["app-user-login-form"]],inputs:{userData:"userData"},decls:13,vars:2,consts:[["matInput","","placeholder","Username","type","text","name","Username","required","",3,"ngModelChange","ngModel"],["matInput","","type","password","placeholder","Password","name","Password","required","",3,"ngModelChange","ngModel"],["mat-raised-button","","color","primary",3,"click"]],template:function(i,t){i&1&&(r(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),m(3,"Login"),o()(),r(4,"mat-card-content")(5,"form")(6,"mat-form-field")(7,"input",0),u("ngModelChange",function(a){return c(t.userData.Username,a)||(t.userData.Username=a),a}),o()(),r(8,"mat-form-field")(9,"input",1),u("ngModelChange",function(a){return c(t.userData.Password,a)||(t.userData.Password=a),a}),o()()()(),r(10,"mat-card-actions")(11,"button",2),g("click",function(){return t.loginUser()}),m(12," Login "),o()()()),i&2&&(d(7),p("ngModel",t.userData.Username),d(2),p("ngModel",t.userData.Password))},dependencies:[b,C,_,y,w,D,P,U,W,O,h,M,E,k,S,F,v,I,B,R],styles:["mat-card[_ngcontent-%COMP%]{max-width:400px;margin:0 auto}mat-form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:1rem}mat-card-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:1rem}"]})};var H=class l{constructor(e){this.dialog=e}openUserRegistrationDialog(){this.dialog.open(T,{width:"280px"})}openUserLoginDialog(){this.dialog.open(x,{width:"280px"})}static \u0275fac=function(i){return new(i||l)(s(V))};static \u0275cmp=f({type:l,selectors:[["app-welcome-page"]],decls:10,vars:0,consts:[[1,"main-content"],[1,"auth-buttons"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","accent",3,"click"]],template:function(i,t){i&1&&(r(0,"div",0)(1,"h1"),m(2,"Welcome to myFlix! \u{1F3AC}"),o(),r(3,"p"),m(4,"Discover your next favorite movie"),o(),r(5,"div",1)(6,"button",2),g("click",function(){return t.openUserLoginDialog()}),m(7," Login "),o(),r(8,"button",3),g("click",function(){return t.openUserRegistrationDialog()}),m(9," Sign Up "),o()()())},dependencies:[h,M],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh;background:linear-gradient(135deg,#0f0f23,#0a0a1a,#05050f);color:#fff;font-family:Roboto,sans-serif}.main-content[_ngcontent-%COMP%]{text-align:center;padding:2rem;background:#ffffff1a;border-radius:10px;box-shadow:0 4px 8px #0003}h1[_ngcontent-%COMP%]{font-size:3em;margin-bottom:1rem;font-family:Crimson Pro,serif}p[_ngcontent-%COMP%]{font-size:1.2em;margin-bottom:2rem;opacity:.9}.auth-buttons[_ngcontent-%COMP%]{margin-top:2rem}.auth-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 1rem;padding:.8rem 2rem;font-size:1.1em;border-radius:5px}"]})};export{H as WelcomePageComponent};
